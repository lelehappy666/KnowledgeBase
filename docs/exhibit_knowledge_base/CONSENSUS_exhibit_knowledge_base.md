# CONSENSUS: 展品知识库 (Exhibit Knowledge Base)

## 1. 核心共识
我们已就开发一个 **本地化、离线运行、支持多媒体与复杂元数据的展品知识库系统** 达成一致。
该系统将严格遵循《展品展项知识库体系.pdf》中定义的四大维度（认知、内容、技术、产品化）进行数据建模。

## 2. 需求规格 (Requirements Specification)

### 2.1 系统架构
*   **部署模式**: 局域网单机或服务器部署，离线运行。
*   **存储架构**:
    *   **结构化数据**: SQLite 数据库文件 (轻量、易备份)。
    *   **非结构化数据 (Blob)**: 本地 NAS 挂载路径或本地磁盘目录。
*   **技术架构**: Next.js (全栈) + Prisma (ORM) + Shadcn/UI (组件库)。

### 2.2 核心功能模块
#### A. 展品管理 (Core)
*   **元数据录入**: 提供复杂的表单，支持 PDF 中定义的 A/B/C/D 四类属性录入。
    *   *优化策略*: 将低频或结构多变的属性（如具体的工程风险条目、失败案例细节）封装为 JSON 存储，简化数据库 Schema 变更成本。
*   **多媒体关联**: 上传/关联图片、视频、3D 模型。系统自动根据文件后缀识别类型。

#### B. 知识库检索与展示
*   **多维筛选**: 侧边栏提供“学科”、“交互方式”、“成本区间”、“状态”等筛选器。
*   **详情页**: 结构化展示展品的完整信息，包含 3D 模型预览 (Web Viewer) 和视频播放。

#### C. 系统管理
*   **鉴权**: 基于密码的简单管理员登录 (NextAuth.js / 自定义 Session)。
*   **文件管理**: 配置文件存储根目录 (NAS Path)。

### 2.3 验收标准 (Acceptance Criteria)
1.  **环境适应性**: 在无外网环境下，系统能正常启动，数据库读写正常。
2.  **数据完整性**: 能够完整录入一个符合 PDF 定义的复杂展项（包含评分、原理、BOM成本估算等）。
3.  **多媒体支持**: 能够上传并正确预览图片 (.jpg/.png)、视频 (.mp4)、3D模型 (.glb/.gltf)。
4.  **检索能力**: 能通过关键词或分类快速找到录入的展品。

## 3. 技术约束与风险
*   **NAS 访问**: 需确保运行 Next.js 的主机对 NAS 路径有读写权限（Windows 下可能需要配置服务登录用户）。
*   **3D 性能**: 浏览器端渲染 3D 模型，需注意模型文件大小，建议限制上传大小或提示用户优化。
*   **视频流**: Next.js 自带的 Server 可能不适合高并发视频流，但局域网少量用户访问无压力。

## 4. 确认无歧义
*   **自动分类**: 确认为“基于文件格式的分类”，而非“基于图像内容的AI识别”。
*   **数据库**: 确认为 SQLite，无需安装额外数据库服务。
